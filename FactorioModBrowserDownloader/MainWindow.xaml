<Window x:Class="FactorioModBrowserDownloader.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FactorioModBrowserDownloader"
        xmlns:converters="clr-namespace:FactorioModBrowserDownloader.Controls.Converters"
        xmlns:svg="http://sharpvectors.codeplex.com/svgc/"
        mc:Ignorable="d"
        Title="{Binding Width, ElementName=this}" Height="900" Width="1200" x:Name="this">
    <Window.DataContext>
        <local:MainWindowViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/MainWindowResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <ScrollViewer>
        <Grid>
            <Grid.Background>
                <ImageBrush
                    ImageSource="/Resources/background.jpg"
                    Stretch="Uniform" TileMode="Tile"
                    AlignmentX="Center" AlignmentY="Top"
                    Viewport="0,0,2048,3072"
                    ViewportUnits="Absolute"
                    RenderOptions.BitmapScalingMode="HighQuality"
                    RenderOptions.EdgeMode="Aliased"/>
            </Grid.Background>

            <Image Source="/Resources/factorio.png" Height="70" Margin="100,30,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"/>

            <DockPanel MaxWidth="1000" Margin="100,150,100,100" HorizontalAlignment="Stretch">
                <StackPanel DockPanel.Dock="Left" Width="150" Background="#242324">
                    <Label Content="{Binding FullModsList.Count}" ContentStringFormat="Loaded pages : {0}" Foreground="White"/>
                    <Image Source="{Binding LastThumbnailDownload}"/>
                </StackPanel>

                <ItemsControl ItemsSource="{Binding FullModsList}" HorizontalAlignment="Stretch" Background="#313031">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>

                            <Border CornerRadius="5" Background="#414040" Margin="15,15,15,0">
                                <DockPanel HorizontalAlignment="Stretch">
                                    <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" FlowDirection="RightToLeft" Height="35" Background="#242324">
                                        <Button Content="Download" Margin="6" Width="100"/>
                                    </StackPanel>

                                    <Grid DockPanel.Dock="Left" Width="150" Height="150" Margin="10">
                                        <Image Source="{Binding DownloadedThumbnail}" Margin="1.5"/>
                                        <Border BorderThickness="2" CornerRadius="5">
                                            <Border.BorderBrush>
                                                <SolidColorBrush Opacity="0.3" Color="Black"/>
                                            </Border.BorderBrush>
                                        </Border>
                                    </Grid>

                                    <Border DockPanel.Dock="Right" BorderThickness="4,0,0,0" Width="170" BorderBrush="#242323">
                                        <StackPanel>
                                            <TextBlock Margin="10" FontSize="16">
                                                <Image Source="{StaticResource ModInfo_Icon_Category}" Width="20" Height="20"/>
                                                <Run Tag="  "/>
                                                <Run Text="{Binding Category}" Foreground="#ffffff" BaselineAlignment="Center"/>
                                                <LineBreak/>
                                                
                                                <Image Source="{StaticResource ModInfo_Icon_LastUpdated}" Width="20" Height="20"/>
                                                <Run Tag="  "/>
                                                <Run Text="{Binding UpdatedDate, Converter={converters:RelativeDateTimeConverter}}" Foreground="#ffffff" BaselineAlignment="Center"/>
                                                <LineBreak/>
                                                
                                                <Image Source="{StaticResource ModInfo_Icon_GameVersion}" Width="20" Height="20"/>
                                                <Run Tag="  "/>
                                                <Run Text="{Binding DisplayRelease.ModInfo.FactorioVersion}" Foreground="#ffffff" BaselineAlignment="Center"/>
                                                <LineBreak/>
                                                
                                                <Image Source="{StaticResource ModInfo_Icon_DownloadsCount}" Width="20" Height="20"/>
                                                <Run Tag="  "/>
                                                <Run Text="{Binding DownloadsCount}" Foreground="#ffffff" BaselineAlignment="Center"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </Border>

                                    <StackPanel Margin="0,13,10,10">
                                        <TextBlock Text="{Binding Title}" FontSize="20" Foreground="#fce3be"/>
                                        <TextBlock>
                                        <Run Text="by " Foreground="#ffffff"/>
                                        <Run Text="{Binding OwnerName}" Foreground="DarkOrange"/>
                                        </TextBlock>
                                        <Separator HorizontalAlignment="Stretch" Margin="0,5,5,5" Background="#242323"/>
                                        <TextBlock Text="{Binding Summary}" Foreground="#ffffff"/>
                                    </StackPanel>

                                </DockPanel>
                            </Border>

                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </DockPanel>
        </Grid>
    </ScrollViewer>
</Window>
